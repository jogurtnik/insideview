<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:replace="fragments/navigation :: headCommon">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <!-- Meta, title, CSS, favicons, etc. -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" href="../../static/images/favicon.ico" type="image/ico"
              th:href="@{/images/favicon.ico}"/>

        <title>Inside View</title>

        <!-- Bootstrap -->
        <link href="../../static/vendors/css/bootstrap.min.css" rel="stylesheet"
              th:href="@{/vendors/css/bootstrap.min.css}"/>
        <!-- Font Awesome -->
        <link href="../../static/vendors/css/font-awesome.min.css" rel="stylesheet"
              th:href="@{/vendors/css/font-awesome.min.css}"/>

        <link href="../../static/css/animate.min.css" rel="stylesheet"
              th:href="@{/css/animate.min.css}"/>

        <!-- Custom Theme Style -->
        <link href="../../static/build/css/custom.min.css" rel="stylesheet"
              th:href="@{/build/css/custom.min.css}"/>
        <link href="../../static/css/icheck/flat/green.css" rel="stylesheet"
              th:href="@{/css/icheck/flat/green.css}"/>
    </th:block>

    <th:block th:fragment="headDatatables">
    <!-- Datatables Styles -->
    <link href="../../static/js/datatables/jquery.dataTables.min.css" rel="stylesheet" type="text/css"
        th:href="@{/js/datatables/jquery.dataTables.min.css}"/>
    <link href="../../static/js/datatables/fixedHeader.bootstrap.min.css" rel="stylesheet" type="text/css"
        th:href="@{/js/datatables/fixedHeader.bootstrap.min.css}"/>
    <link href="../../static/js/datatables/responsive.bootstrap.min.css" rel="stylesheet" type="text/css"
        th:href="@{/js/datatables/responsive.bootstrap.min.css}"/>
    <link href="../../static/js/datatables/scroller.bootstrap.min.css" rel="stylesheet" type="text/css"
        th:href="@{/js/datatables/scroller.bootstrap.min.css}"/>

    <!-- jQuery -->
    <script src="../../static/vendors/js/jquery.min.js"
            th:src="@{/vendors/js/jquery.min.js}"></script>
    </th:block>
</head>
<body class="nav-md">

<div class="container body">

    <div class="main_container">

        <div th:replace="fragments/navigation :: leftNavigationMenu"></div>

        <div th:replace="fragments/navigation :: topNavigationMenu"></div>

        <div class="right_col" role="main">

            <div class="page-title">
                <div class="title_left">
                    <h3>Query</h3>
                </div>
            </div>

            <div th:fragment="queryForm">

                <!--/*@thymesVar id="queryFormData" type="uk.co.punishell.insideview.model.services.web.forms.QueryFormData"*/-->

            <form class="form-horizontal form-label-left"
            th:object="${queryFormData}"
            th:action="@{performQuery}"
            th:method="POST">
            <div class="row">
                <div class="col-md-12 col-sm-12 col-xs-12">

                    <div class="x_panel">

                        <div class="x_title">
                            <div class="col-md-6">
                                <h2>Race settings</h2>
                            </div>
                            <div class="col-md-6">
                                <ul class="nav navbar-right panel_toolbox">
                                    <li>
                                        <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                    </li>
                                    <li>
                                        <a class="close-link"><i class="fa fa-close"></i></a>
                                    </li>
                                </ul>
                            </div>
                            <div class="clearfix"></div>
                        </div>

                    <div class="x_content">
                            <div class="row">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <div class="form-group">
                                            <label class="control-label col-md-4 col-sm-4 col-xs-12" for="date-since">Date since: <span class="required">*</span></label>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <p><input id="date-since" class="form-control col-md-6 col-xs-12" type="date"
                                                          th:field="${queryFormData.dateSince}"
                                                          th:type="date"/></p>
                                            </div>
                                            <label class="control-label col-md-4 col-sm-4 col-xs-12" for="date-to">Date to: <span class="required">*</span></label>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <p><input id="date-to" class="form-control col-md-6 col-xs-12" type="date"
                                                          th:field="${queryFormData.dateTo}"/></p>
                                            </div>
                                    </div>
                                    <div class="form-group">
                                            <label class="control-label col-md-4 col-sm-4 col-xs-12" for="country">Country: </label>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <select id="country" class="form-control" th:field="${queryFormData.country}">
                                                    <option
                                                            th:each="country : ${queryFormData.countries}"
                                                            th:value="${country}"
                                                            th:text="${country}" >Select country</option>
                                                </select>
                                            </div>
                                    </div>
                                    <div class="form-group">
                                            <label class="control-label col-md-4 col-sm-4 col-xs-12" for="trackLength">Track length: </label>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <select id="trackLength" class="form-control" th:field="${queryFormData.trackLength}">
                                                    <option
                                                            th:each="trackLength : ${queryFormData.trackLengths}"
                                                            th:value="${trackLength}"
                                                            th:text="${trackLength}" >Select track length</option>
                                                </select>
                                            </div>
                                            <label class="control-label col-md-4 col-sm-4 col-xs-12" for="trackType">Track type: </label>
                                            <div class="col-md-6 col-sm-6 col-xs-12">
                                                <select id="trackType" class="form-control" th:field="${queryFormData.trackType}">
                                                    <option
                                                            th:each="trackType : ${queryFormData.trackTypes}"
                                                            th:value="${trackType}"
                                                            th:text="${trackType}" >Select track type</option>
                                                </select>
                                            </div>
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <div class="form-group">
                                        <label class="control-label col-md-4 col-sm-4 col-xs-12" for="fiveStarsCount">Five stars count: </label>
                                        <div id="fiveStarsCount">
                                            <label class="control-label col-md-1 col-sm-1 col-xs-12" for="fiveStarsCountMin">MIN</label>
                                            <div class="col-md-2 col-sm-2 col-xs-12">
                                                <input id="fiveStarsCountMin" class="form-control col-md-2 col-xs-12" type="number" value="0"
                                                       th:field="${queryFormData.fiveStarsCountMin}"/>
                                            </div>
                                            <label class="control-label col-md-1 col-sm-1 col-xs-12" for="fiveStarsCountMax">MIN</label>
                                            <div class="col-md-2 col-sm-2 col-xs-12">
                                                <input id="fiveStarsCountMax" class="form-control col-md-2 col-xs-12" type="number" value="0"
                                                       th:field="${queryFormData.fiveStarsCountMax}"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-md-4 col-sm-4 col-xs-12" for="runnersCount">Runners count: </label>
                                        <div id="runnersCount">
                                            <label class="control-label col-md-1 col-sm-1 col-xs-12" for="runnersCountMin">MIN</label>
                                            <div class="col-md-2 col-sm-2 col-xs-12">
                                                <input id="runnersCountMin" class="form-control col-md-2 col-xs-12" type="number" value="0"
                                                       th:field="${queryFormData.runnersCountMin}"/>
                                            </div>
                                            <label class="control-label col-md-1 col-sm-1 col-xs-12" for="runnersCountMax">MAX</label>
                                            <div class="col-md-2 col-sm-2 col-xs-12">
                                                <input id="runnersCountMax" class="form-control col-md-2 col-xs-12" type="number" value="0"
                                                       th:field="${queryFormData.runnersCountMax}"/>
                                            </div>
                                        </div>
                                    </div>
                                    </div>
                                </div>
                            </div>
                    </div>
                </div>
            </div>

            <div class="row">

                <div class="col-md-12 col-sm-12 col-xs-12">

                    <div class="x_panel">

                        <div class="x_title">
                            <div class="col-md-6">
                                <h2>Runner settings</h2>
                            </div>
                            <div class="col-md-6">
                                <ul class="nav navbar-right panel_toolbox">
                                    <li>
                                        <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                    </li>
                                    <li>
                                        <a class="close-link"><i class="fa fa-close"></i></a>
                                    </li>
                                </ul>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content">
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12" for="mov1">Mov1: </label>
                                    <div id="mov1">
                                        <label class="control-label col-md-1 col-sm-1 col-xs-12" for="mov1Min">MIN</label>
                                        <div class="col-md-2 col-sm-2 col-xs-12">
                                            <input id="mov1Min" class="form-control col-md-2 col-xs-12" type="number" value="0" step="0.01"
                                                   th:field="${queryFormData.mov1Min}"/>
                                        </div>
                                        <label class="control-label col-md-1 col-sm-1 col-xs-12" for="mov1Max">MAX</label>
                                        <div class="col-md-2 col-sm-2 col-xs-12">
                                            <input id="mov1Max" class="form-control col-md-2 col-xs-12" type="number" value="0" step="0.01"
                                                   th:field="${queryFormData.mov1Max}"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12" for="mean">Mean: </label>
                                    <div id="mean">
                                        <label class="control-label col-md-1 col-sm-1 col-xs-12" for="meanMin">MIN</label>
                                        <div class="col-md-2 col-sm-2 col-xs-12">
                                            <input id="meanMin" class="form-control col-md-2 col-xs-12" type="number" value="0" step="0.01"
                                                   th:field="${queryFormData.meanMin}"/>
                                        </div>
                                        <label class="control-label col-md-1 col-sm-1 col-xs-12" for="meanMax">MAX</label>
                                        <div class="col-md-2 col-sm-2 col-xs-12">
                                            <input id="meanMax" class="form-control col-md-2 col-xs-12" type="number" value="0" step="0.01"
                                                   th:field="${queryFormData.meanMax}"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12" for="mov3to1">Mov3to1: </label>
                                    <div id="mov3to1">
                                        <label class="control-label col-md-1 col-sm-1 col-xs-12" for="mov3to1Min">MIN</label>
                                        <div class="col-md-2 col-sm-2 col-xs-12">
                                            <input id="mov3to1Min" class="form-control col-md-2 col-xs-12" type="number" value="0" step="0.01"
                                                   th:field="${queryFormData.mov3to1Min}"/>
                                        </div>
                                        <label class="control-label col-md-1 col-sm-1 col-xs-12" for="mov3to1Max">MAX</label>
                                        <div class="col-md-2 col-sm-2 col-xs-12">
                                            <input id="mov3to1Max" class="form-control col-md-2 col-xs-12" type="number" value="0" step="0.01"
                                                   th:field="${queryFormData.mov3to1Max}"/>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12" for="nptipsCount">NPTips: </label>
                                    <div id="nptipsCount">
                                        <label class="control-label col-md-1 col-sm-1 col-xs-12" for="nptipsCountMin">MIN</label>
                                        <div class="col-md-2 col-sm-2 col-xs-12">
                                            <input id="nptipsCountMin" class="form-control col-md-2 col-xs-12" type="number" value="0"
                                                   th:field="${queryFormData.nptipsCountMin}"
                                                   th:value="${queryFormData.nptipsCountMin}"/>
                                        </div>
                                        <label class="control-label col-md-1 col-sm-1 col-xs-12" for="nptipsCountMax">MAX</label>
                                        <div class="col-md-2 col-sm-2 col-xs-12">
                                            <input id="nptipsCountMax" class="form-control col-md-2 col-xs-12" type="number" value="0"
                                                   th:field="${queryFormData.nptipsCountMax}"/>
                                        </div>
                                    </div>
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12" for="nptipsPerRace">per race: </label>
                                    <div id="nptipsPerRace">
                                        <label class="control-label col-md-1 col-sm-1 col-xs-12" for="nptipsPerRaceMin">MIN</label>
                                        <div class="col-md-2 col-sm-2 col-xs-12">
                                            <input id="nptipsPerRaceMin" class="form-control col-md-2 col-xs-12" type="number" value="0"
                                                   th:field="${queryFormData.nptipsPerRaceMin}"/>
                                        </div>
                                        <label class="control-label col-md-1 col-sm-1 col-xs-12" for="nptipsPerRaceMax">MAX</label>
                                        <div class="col-md-2 col-sm-2 col-xs-12">
                                            <input id="nptipsPerRaceMax" class="form-control col-md-2 col-xs-12" type="number" value="0"
                                                   th:field="${queryFormData.nptipsPerRaceMax}"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12" for="favouritePlace">Favourite place: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input id="favouritePlace" class="form-control col-md-6 col-xs-12" type="number" value="0"
                                               th:field="${queryFormData.favouritePlace}"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12" for="runnerStars">Stars: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input id="runnerStars" class="form-control col-md-6 col-xs-12" type="number" value="0"
                                               th:field="${queryFormData.runnerStars}"/>
                                    </div>
                                    <label class="control-label col-md-4 col-sm-4 col-xs-12" for="favouritePlaceAmongStars">Fav place among stars: </label>
                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                        <input id="favouritePlaceAmongStars" class="form-control col-md-6 col-xs-12" type="number" value="0"
                                               th:field="${queryFormData.favouritePlaceAmongStars}"/>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="well" style="overflow: auto">
                                        <button type="submit" class="btn btn-success">Run querry</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </form>
        </div>

            <div th:fragment="queryResult">

                <!--/*@thymesVar id="queryFormResult" type="uk.co.punishell.insideview.model.services.web.forms.QueryFormResult"*/-->
                <!--/*@thymesVar id="race" type="uk.co.punishell.insideview.model.services.web.commands.entityCommands.RaceCommand"*/-->
                <!--/*@thymesVar id="races" type="java.util.List"*/-->
                <!--/*@thymesVar id="raceTypes" type="uk.co.punishell.insideview.model."*/-->
                <!--/*@thymesVar id="runner" type="uk.co.punishell.insideview.model.services.web.commands.entityCommands.RunnerCommand"*/-->
                <!--/*@thymesVar id="runners" type="java.util.List"*/-->

            <th:block th:each="race : ${session.queryFormResult.races}">
            <div class="row">

                <div class="col-md-12 col-sm-12- col-xs-12">

                    <div class="x_panel">

                        <div class="x_title">
                            <div class="col-md-6">
                                <h2 th:text="'Race ' + ${raceStat.count} + ' - ' + ${race.country} +
                                    ', ' + ${race.time.toString()} + ' | ' + ${race.trackType} + ' | ' + ${race.trackLength}">
                                    Race - Country, City, Time
                                </h2>
                            </div>
                            <div class="col-md-6">
                                <ul class="nav navbar-right panel_toolbox">
                                    <li>
                                        <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                    </li>
                                    <li>
                                        <a class="close-link"><i class="fa fa-close"></i></a>
                                    </li>
                                </ul>
                            </div>
                            <div class="clearfix"></div>
                        </div>

                        <div class="x_content">
                            <div class="row">
                                <table id="datatable-fixed-header"
                                       th:id="'datatable-fixed-header' + ${raceStat.count}"
                                       class="table table-striped table-bordered">
                                    <thead>
                                        <tr>
                                            <th>Runner</th>
                                            <th>Price3</th>
                                            <th>Mov3</th>
                                            <th>Price2</th>
                                            <th>Mov2</th>
                                            <th>Price1</th>
                                            <th>Mov1</th>
                                            <th>Mean</th>
                                            <th>321</th>
                                            <th>Stars</th>
                                            <th>NPTips</th>
                                            <th>Result</th>
                                        </tr>
                                    </thead>

                                    <tbody>
                                    <th:block th:each="runner : ${race.runners}">
                                        <tr>
                                            <td th:text="${runner.horseName}">Storm Ahead</td>
                                            <td th:text="${runner.price3}">4.20</td>
                                            <td th:text="${runner.mov3}">-1.35</td>
                                            <td th:text="${runner.price2}">4.2</td>
                                            <td th:text="${runner.mov2}">-1.35</td>
                                            <td th:text="${runner.price1}">4.35</td>
                                            <td th:text="${runner.mov1}">-1.62</td>
                                            <td th:text="${runner.mean}">-1.32</td>
                                            <td th:text="${runner.mov3to1}">0.23</td>
                                            <td>
                                                <th:block th:if="${runner.stars == 0}" th:text="''">
                                                    0
                                                </th:block>
                                                <th:block th:if="${runner.stars == 1}">
                                                    <i class="fa fa-star"></i>
                                                </th:block>
                                                <th:block th:if="${runner.stars == 2}">
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                </th:block>
                                                <th:block th:if="${runner.stars == 3}">
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                </th:block>
                                                <th:block th:if="${runner.stars == 4}">
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                </th:block>
                                                <th:block th:if="${runner.stars == 5}">
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                </th:block>
                                            </td>
                                            <td th:text="${runner.nptips}">7</td>
                                            <td th:text="${runner.result}">P</td>
                                        </tr>
                                        <tr th:remove="all">
                                            <td>Pastime</td>
                                            <td>4.40</td>
                                            <td>4.63</td>
                                            <td>4.30</td>
                                            <td>4.75</td>
                                            <td>4.40</td>
                                            <td>4.63</td>
                                            <td>4.50</td>
                                            <td>0.00</td>
                                            <td>5</td>
                                            <td>0</td>
                                            <td> </td>
                                        </tr>
                                    </th:block>
                                    </tbody>
                                </table>
                                <div class="clearfix"></div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            </th:block>

            </div>
            </div>

        </div>

    </div>

<th:block th:replace="fragments/navigation :: scriptsCommon">
    <!-- Bootstrap -->
    <script src="../../static/vendors/js/bootstrap.min.js"
            th:src="@{/vendors/js/bootstrap.min.js}"></script>
    <!-- Custom Theme Scripts -->
    <script src="../../static/build/js/custom.min.js"
            th:src="@{/build/js/custom.min.js}"></script>
</th:block>

<th:block th:fragment="scriptsDatatables">

    <!-- Datatables-->
    <script src="../../static/js/datatables/jquery.dataTables.min.js"
            th:src="@{/js/datatables/jquery.dataTables.min.js}"></script>
    <script src="../../static/js/datatables/dataTables.bootstrap.js"
            th:src="@{/js/datatables/dataTables.bootstrap.js}"></script>
    <script src="../../static/js/datatables/dataTables.fixedHeader.min.js"
            th:src="@{/js/datatables/dataTables.fixedHeader.min.js}"></script>

    <th:block th:if="${not #lists.isEmpty(session.races)}"
              th:each="race : ${session.races}">

    <script type="text/javascript"
            th:inline="javascript">

        $(document).ready(function() {

            var tableId = /*[('\"#datatable-fixed-header' + ${raceStat.count} + '\"')]*/ "#datatable-fixed-header";

            $(tableId).DataTable({
                fixedHeader: true
            });
        });

    </script>
    </th:block>
</th:block>

</body>
</html>